<?php $address = $this->pub->address;?>

<div class="container_12">

    <h1><?php echo $this->pub->name; ?></h1>

    <div class="grid_8">
        <?php 
    	$promos = $this->pub->getPromos();
    	if (count($promos)): ?>
        <table class="generic" cellspacing="1px" cellpadding="0px" border="0">
            <thead>
                <tr>
                    <th><a href="/deal/add/idPub/<?php echo $this->pub->id; ?>">Add Deal</a></th>
                </tr>
            </thead>
            <tbody>
                <?php foreach ($promos as $promo): ?>
                    <tr>
                        <td>
                            <h4>$ <?php echo $promo->price; ?> 
                                <?php foreach ($promo->getLiquorTypes() as $liquor) {
                                    echo ' ' . $liquor->name;
                                } ?>
                            </h4> 
                            <p><?php echo $promo->day; ?> From <?php echo $promo->timeStart; ?> to <?php echo $promo->timeEnd; ?></p>
                            
                        </td>
                    </tr>
                <?php endforeach; ?>
            </tbody>
        </table>
            
    	<?php else: ?>
    	    <p>There are no deals for this venue yet. <a href="/deal/add/idPub/<?php echo $this->pub->id; ?>">Why don't you enter one?</a></p>
    	<?php endif;?>
    </div>

    <div class="grid_4">
        <div id="map_canvas" style="width: 100%; height: 200px;"></div>
        <ul>
            <li><?php echo $address; ?></li>
			<li><a href="<?php echo $this->pub->url; ?>"><?php echo $this->pub->url; ?></a></li>
			<li><a href="mailto:<?php echo $this->pub->email; ?>"><?php echo $this->pub->email; ?></a></li>
		</ul>
    </div>
</div>

<script type="text/javascript"
    src="http://maps.googleapis.com/maps/api/js?sensor=true&libraries=places">
</script>
<script type="text/javascript">

$(document).ready(function() {
 
    var center = new google.maps.LatLng(parseFloat(<?php echo $address->latitude; ?>), parseFloat(<?php echo $address->longitude; ?>));
    var myOptions = {
        zoom: 18,
        center: center,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    };

    var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

    new google.maps.Marker({
        map: map,
        position: center    
    });



});
</script>