<div data-role="page" class="page">
    <div class="home" data-role="header" data-add-back-btn="true">
        <a href="/" class="navButton" data-role="none" data-transition="flip">
            <img src="/img/icons/navbar/53-house-shadow.png" width="24" height="28" />
        </a>
        <h1><img src="/img/dunia.png" width="82" height="25" /></h1>
        <a href="#" id="locate" class="navButton" data-role="none">
            <img src="/img/icons/navbar/74-location-shadow.png" width="24" height="28" />
        </a>
    </div>

    <div data-role="content" style="height: 95%; padding: 0">
        <script type="text/javascript">
            $(document).ready(function() {
                var amHere = new google.maps.LatLng('<?php echo $this->lat; ?>', '<?php echo $this->long; ?>');

                var myOptions = {
                    zoom: 15,
                    maxZoom: 20,
                    center: amHere,
                    mapTypeId: google.maps.MapTypeId.ROADMAP
                };

                var Map = Dunia.Map.create({
                    longitude: '<?php echo $this->long; ?>',
                    latitude:  '<?php echo $this->lat; ?>',
                    map:       new google.maps.Map(document.getElementById("map_canvas"), myOptions)
                });

                if (navigator.geolocation) {
                    navigator.geolocation.getCurrentPosition(function (position) {
                        Map.longitude = position.coords.longitude;
                        Map.latitude  = position.coords.latitude;
                        Map.center();
                    });
                }

                google.maps.event.addListener(Map.map, 'tilesloaded', function(event) {
                    Map.fetchBars();
                });

                $('#locate').click(function() {
                    Map.center();
                    return false;
                });

            });
        </script>
        <div id="map_canvas" style="z-index: 0;height:100%;min-height:300px;"></div>
    </div>

    <div id="footer" data-role="footer" data-position="fixed"/>
</div>
</body>
</html>
